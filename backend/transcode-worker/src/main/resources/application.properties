spring.application.name=transcode-worker
server.port=9696

spring.threads.virtual.enabled=true

minio.url=${MINIO_API_URL}
minio.access-key=${MINIO_ACCESS_KEY}
minio.secret-key=${MINIO_SECRET_KEY}
app.minio.public-hls-url=${minio.url}/bbmovie-hls/movies

ffmpeg.path=${FFMPEG_PATH}
ffprobe.path=${FFPROBE_PATH}

app.transcode.temp-dir=${TEMP_DIR}
logging.level.com.bbmovie=DEBUG
app.clamav.enabled=false
app.transcode.key-server-url=http://localhost:1205/api/stream
logging.level.net.bramp.ffmpeg.progress=ERROR

# Transcode Scheduler Configuration
# Auto-detects CPU cores and reserves some for OS/DB
# Set to 0 for auto-detection, or override with specific value
# Auto-detection: For systems > 4 cores, reserves 2 cores for OS/DB
#                 For systems <= 4 cores, uses all cores (budget VPS)
app.transcode.max-capacity=0

# NATS JetStream Configuration
# Subject to subscribe to for MinIO events
nats.minio.subject=minio.events
# JetStream stream name
nats.stream.name=BBMOVIE
# Consumer durable name (unique per worker instance)
nats.consumer.durable=transcode-worker
# Ack wait duration in minutes (how long to wait before redelivery)
nats.consumer.ack-wait-minutes=5
# Heartbeat interval in seconds (send inProgress() every N seconds)
nats.consumer.heartbeat-interval-seconds=30
# Batch size for fetching messages (should be <= maxCapacity)
nats.consumer.fetch-batch-size=5
# Fetch timeout in seconds (how long to wait for messages)
nats.consumer.fetch-timeout-seconds=2