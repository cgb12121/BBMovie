# Test configuration for transcode-worker
spring.application.name=transcode-worker-test

# Enable new pipeline for testing
app.pipeline.enabled=true

# Smaller capacities for faster tests
app.pipeline.probe-queue-capacity=10
app.pipeline.execute-queue-capacity=5
app.pipeline.prober-thread-count=2
app.pipeline.executor-thread-count=2
app.pipeline.resource-acquire-timeout-seconds=5
app.pipeline.monitor-interval-seconds=10

# Smaller scheduler capacity for tests
app.transcode.max-capacity=4

# NATS test configuration
nats.url=nats://localhost:4222
nats.minio.subject=minio.events
nats.stream.name=BBMOVIE-TEST
nats.consumer.durable=transcode-worker-test
nats.consumer.ack-wait-minutes=1
nats.consumer.heartbeat-interval-seconds=5
nats.consumer.fetch-batch-size=2
nats.consumer.fetch-timeout-seconds=1

# MinIO test configuration
minio.url=http://localhost:9000
minio.access-key=minioadmin
minio.secret-key=minioadmin
app.minio.public-hls-url=http://localhost:9000/bbmovie-hls/movies
app.minio.presigned-url-expiry-minutes=5

# Transcode settings
app.transcode.temp-dir=${java.io.tmpdir}/transcode-test
app.transcode.key-server-url=http://localhost:1205/api/stream
app.transcode.key-rotation-interval=5

# Probe settings
app.probe.timeout-seconds=10
app.probe.partial-size-mb=5

# Disable ClamAV for tests (unless you have it running)
app.clamav.enabled=false

# FFmpeg paths (adjust for your system)
ffmpeg.path=ffmpeg
ffprobe.path=ffprobe

# Logging
logging.level.com.bbmovie.transcodeworker=DEBUG
logging.level.com.bbmovie.transcodeworker.service.pipeline=DEBUG
logging.level.com.bbmovie.transcodeworker.service.scheduler=DEBUG
logging.level.net.bramp.ffmpeg.progress=ERROR

